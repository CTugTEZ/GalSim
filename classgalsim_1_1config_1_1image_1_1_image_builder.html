<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GalSim: galsim.config.image.ImageBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GalSim
   </div>
   <div id="projectbrief">The modular galaxy image simulation toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegalsim.html">galsim</a></li><li class="navelem"><a class="el" href="namespacegalsim_1_1config.html">config</a></li><li class="navelem"><a class="el" href="namespacegalsim_1_1config_1_1image.html">image</a></li><li class="navelem"><a class="el" href="classgalsim_1_1config_1_1image_1_1_image_builder.html">ImageBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgalsim_1_1config_1_1image_1_1_image_builder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">galsim.config.image.ImageBuilder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A base class for building full images.  
 <a href="classgalsim_1_1config_1_1image_1_1_image_builder.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for galsim.config.image.ImageBuilder:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgalsim_1_1config_1_1image_1_1_image_builder.png" usemap="#galsim.config.image.ImageBuilder_map" alt=""/>
  <map id="galsim.config.image.ImageBuilder_map" name="galsim.config.image.ImageBuilder_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa0a8ec6db3e0f7fc873b86e8b85aec97"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1config_1_1image_1_1_image_builder.html#aa0a8ec6db3e0f7fc873b86e8b85aec97">setup</a></td></tr>
<tr class="memdesc:aa0a8ec6db3e0f7fc873b86e8b85aec97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do the initialization and setup for building the image.  <a href="#aa0a8ec6db3e0f7fc873b86e8b85aec97">More...</a><br/></td></tr>
<tr class="separator:aa0a8ec6db3e0f7fc873b86e8b85aec97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721183a6b4e416693b8afc91d33eaa88"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1config_1_1image_1_1_image_builder.html#a721183a6b4e416693b8afc91d33eaa88">buildImage</a></td></tr>
<tr class="memdesc:a721183a6b4e416693b8afc91d33eaa88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build an Image based on the parameters in the config dict.  <a href="#a721183a6b4e416693b8afc91d33eaa88">More...</a><br/></td></tr>
<tr class="separator:a721183a6b4e416693b8afc91d33eaa88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb9515e2f9233b166dc8b3483c7ac735"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1config_1_1image_1_1_image_builder.html#acb9515e2f9233b166dc8b3483c7ac735">makeTasks</a></td></tr>
<tr class="memdesc:acb9515e2f9233b166dc8b3483c7ac735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn a list of jobs into a list of tasks.  <a href="#acb9515e2f9233b166dc8b3483c7ac735">More...</a><br/></td></tr>
<tr class="separator:acb9515e2f9233b166dc8b3483c7ac735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1bbf7cdc890c971459a5baab7d5c01e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1config_1_1image_1_1_image_builder.html#ae1bbf7cdc890c971459a5baab7d5c01e">addNoise</a></td></tr>
<tr class="memdesc:ae1bbf7cdc890c971459a5baab7d5c01e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the final noise to the image.  <a href="#ae1bbf7cdc890c971459a5baab7d5c01e">More...</a><br/></td></tr>
<tr class="separator:ae1bbf7cdc890c971459a5baab7d5c01e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace3d098f5ee50a4edf7f6ceb4e9a7d1b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1config_1_1image_1_1_image_builder.html#ace3d098f5ee50a4edf7f6ceb4e9a7d1b">getNObj</a></td></tr>
<tr class="memdesc:ace3d098f5ee50a4edf7f6ceb4e9a7d1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of objects that will be built for this image.  <a href="#ace3d098f5ee50a4edf7f6ceb4e9a7d1b">More...</a><br/></td></tr>
<tr class="separator:ace3d098f5ee50a4edf7f6ceb4e9a7d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A base class for building full images. </p>
<p>The base class defines the call signatures of the methods that any derived class should follow. It also includes the implementation of the default image type: Single. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae1bbf7cdc890c971459a5baab7d5c01e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.config.image.ImageBuilder.addNoise </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>current_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the final noise to the image. </p>
<p>In the base class, this is a no op, since it directs the BuildStamp function to build the noise at that level. But some image types need to do extra work at the end to add the noise properly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>The image onto which to add the noise. </td></tr>
    <tr><td class="paramname">config</td><td>The configuration dict for the image field. </td></tr>
    <tr><td class="paramname">base</td><td>The base configuration dict. </td></tr>
    <tr><td class="paramname">image_num</td><td>The current image number. </td></tr>
    <tr><td class="paramname">obj_num</td><td>The first object number in the image. </td></tr>
    <tr><td class="paramname">current_var</td><td>The current noise variance in each postage stamps. </td></tr>
    <tr><td class="paramname">logger</td><td>If given, a logger object to log progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a721183a6b4e416693b8afc91d33eaa88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.config.image.ImageBuilder.buildImage </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build an Image based on the parameters in the config dict. </p>
<p>For Single, this is just an image consisting of a single postage stamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The configuration dict for the image field. </td></tr>
    <tr><td class="paramname">base</td><td>The base configuration dict. </td></tr>
    <tr><td class="paramname">image_num</td><td>The current image number. </td></tr>
    <tr><td class="paramname">obj_num</td><td>The first object number in the image. </td></tr>
    <tr><td class="paramname">logger</td><td>If given, a logger object to log progress.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the final image and the current noise variance in the image as a tuple </dd></dl>

</div>
</div>
<a class="anchor" id="ace3d098f5ee50a4edf7f6ceb4e9a7d1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.config.image.ImageBuilder.getNObj </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of objects that will be built for this image. </p>
<p>For Single, this is just 1, but other image types would figure this out from the configuration parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The configuration dict for the image field. </td></tr>
    <tr><td class="paramname">base</td><td>The base configuration dict. </td></tr>
    <tr><td class="paramname">image_num</td><td>The current image number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of objects </dd></dl>

</div>
</div>
<a class="anchor" id="acb9515e2f9233b166dc8b3483c7ac735"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.config.image.ImageBuilder.makeTasks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>jobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn a list of jobs into a list of tasks. </p>
<p>Each task is performed separately in multi-processing runs, so this provides a mechanism to have multiple jobs depend on each other without being messed up by multi-processing. E.g. you could have blends where each task consists of building several overlapping galaxies (each of which would be a single job). Perhaps the first job would include a calculation to determine where all the overlapping galaxies should go, and the later jobs would use the results of this calculation and just place the later galaxies in the appropriate place.</p>
<p>Normally, though, each task is just a single job, in which case, this function is very simple.</p>
<p>For Single, this passes the job onto the MakeStampTasks function (which in turn is normally quite simple). Most other types though probably want one job per task, for which the appropriate code would be: </p>
<pre class="fragment">return [ [ (job, k) ] for k, job in enumerate(jobs) ]
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The configuration dict for the image field. </td></tr>
    <tr><td class="paramname">base</td><td>The base configuration dict. </td></tr>
    <tr><td class="paramname">jobs</td><td>A list of jobs to split up into tasks. Each job in the list is a dict of parameters that includes 'image_num' and 'obj_num'. </td></tr>
    <tr><td class="paramname">logger</td><td>If given, a logger object to log progress.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a list of tasks </dd></dl>

</div>
</div>
<a class="anchor" id="aa0a8ec6db3e0f7fc873b86e8b85aec97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.config.image.ImageBuilder.setup </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ignore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do the initialization and setup for building the image. </p>
<p>This figures out the size that the image will be, but doesn't actually build it yet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The configuration dict for the image field. </td></tr>
    <tr><td class="paramname">base</td><td>The base configuration dict. </td></tr>
    <tr><td class="paramname">image_num</td><td>The current image number. </td></tr>
    <tr><td class="paramname">obj_num</td><td>The first object number in the image. </td></tr>
    <tr><td class="paramname">ignore</td><td>A list of parameters that are allowed to be in config that we can ignore here. i.e. it won't be an error if these parameters are present. </td></tr>
    <tr><td class="paramname">logger</td><td>If given, a logger object to log progress.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>xsize, ysize </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>galsim/config/<a class="el" href="config_2image_8py.html">image.py</a></li>
</ul>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated for GalSim by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6</small></address>
</body>
</html>
