<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GalSim: galsim::OneDimensionalDeviate Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GalSim
   </div>
   <div id="projectbrief">The modular galaxy image simulation toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegalsim.html">galsim</a></li><li class="navelem"><a class="el" href="classgalsim_1_1_one_dimensional_deviate.html">OneDimensionalDeviate</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgalsim_1_1_one_dimensional_deviate-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">galsim::OneDimensionalDeviate Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class which implements random sampling of an arbitrary one-dimensional distribution, for photon shooting.  
 <a href="classgalsim_1_1_one_dimensional_deviate.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_one_dimensional_deviate_8h_source.html">OneDimensionalDeviate.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af0a5b7ccae1a1489ce68ab946f47dfd7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_one_dimensional_deviate.html#af0a5b7ccae1a1489ce68ab946f47dfd7">OneDimensionalDeviate</a> (const <a class="el" href="classgalsim_1_1_flux_density.html">FluxDensity</a> &amp;fluxDensity, std::vector&lt; double &gt; &amp;range, bool isRadial, const <a class="el" href="structgalsim_1_1_g_s_params_ptr.html">GSParamsPtr</a> &amp;gsparams)</td></tr>
<tr class="memdesc:af0a5b7ccae1a1489ce68ab946f47dfd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor  <a href="#af0a5b7ccae1a1489ce68ab946f47dfd7">More...</a><br/></td></tr>
<tr class="separator:af0a5b7ccae1a1489ce68ab946f47dfd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a340447da0fe708e013a438a55638ebee"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_one_dimensional_deviate.html#a340447da0fe708e013a438a55638ebee">getPositiveFlux</a> () const </td></tr>
<tr class="memdesc:a340447da0fe708e013a438a55638ebee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return total flux in positive regions of <a class="el" href="classgalsim_1_1_flux_density.html" title="An interface class for functions giving differential flux vs x or r. ">FluxDensity</a>.  <a href="#a340447da0fe708e013a438a55638ebee">More...</a><br/></td></tr>
<tr class="separator:a340447da0fe708e013a438a55638ebee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2588844558fa11a3298054daf3005576"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_one_dimensional_deviate.html#a2588844558fa11a3298054daf3005576">getNegativeFlux</a> () const </td></tr>
<tr class="memdesc:a2588844558fa11a3298054daf3005576"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return absolute value of total flux in regions of negative <a class="el" href="classgalsim_1_1_flux_density.html" title="An interface class for functions giving differential flux vs x or r. ">FluxDensity</a>.  <a href="#a2588844558fa11a3298054daf3005576">More...</a><br/></td></tr>
<tr class="separator:a2588844558fa11a3298054daf3005576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f7d73d84a2763b364390cf37b94d281"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classgalsim_1_1_photon_array.html">PhotonArray</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_one_dimensional_deviate.html#a5f7d73d84a2763b364390cf37b94d281">shoot</a> (int N, <a class="el" href="classgalsim_1_1_uniform_deviate.html">UniformDeviate</a> ud) const </td></tr>
<tr class="memdesc:a5f7d73d84a2763b364390cf37b94d281"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw photons from the distribution.  <a href="#a5f7d73d84a2763b364390cf37b94d281">More...</a><br/></td></tr>
<tr class="separator:a5f7d73d84a2763b364390cf37b94d281"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class which implements random sampling of an arbitrary one-dimensional distribution, for photon shooting. </p>
<p>The point of this class is to take any function that is derived from <code><a class="el" href="classgalsim_1_1_flux_density.html" title="An interface class for functions giving differential flux vs x or r. ">FluxDensity</a></code> and be able to sample it with photons such that the expectation value of the flux density matches the input function exactly. This class is for functions which do not have convenient analytic means of inverting their cumulative flux distribution.</p>
<p>As explained in <a class="el" href="classgalsim_1_1_s_b_profile.html#ab168c1e486689f65adf9769d062c3f94" title="Shoot photons through this SBProfile. ">SBProfile::shoot()</a>, both positive and negative-flux photons can exist, but we aim that the absolute value of flux be nearly constant so that statistical errors are predictable. This code does this by first dividing the domain of the function into <code><a class="el" href="classgalsim_1_1_interval.html" title="Class used to represent a linear interval or an annulus of probability function. ">Interval</a></code> objects, with known integrated (absolute) flux in each. To shoot a photon, a <a class="el" href="classgalsim_1_1_uniform_deviate.html" title="Pseudo-random number generator with uniform distribution in interval [0.,1.). ">UniformDeviate</a> is selected and scaled to represent the cumulative flux that should exist within the position of the photon. The class first uses the binary-search feature built into the Standard Library <code>set</code> container to locate the <code><a class="el" href="classgalsim_1_1_interval.html" title="Class used to represent a linear interval or an annulus of probability function. ">Interval</a></code> that will contain the photon. Then it asks the <code><a class="el" href="classgalsim_1_1_interval.html" title="Class used to represent a linear interval or an annulus of probability function. ">Interval</a></code> to decide where within the <code><a class="el" href="classgalsim_1_1_interval.html" title="Class used to represent a linear interval or an annulus of probability function. ">Interval</a></code> to place the photon. As noted in the <code><a class="el" href="classgalsim_1_1_interval.html" title="Class used to represent a linear interval or an annulus of probability function. ">Interval</a></code> docstring, this can be done either by rejection sampling, or - if the range of <a class="el" href="classgalsim_1_1_flux_density.html" title="An interface class for functions giving differential flux vs x or r. ">FluxDensity</a> values within an interval is small - by simply adjusting the flux to account for deviations from uniform flux density within the interval.</p>
<p>On construction, the class must be provided with some information about the nature of the function being sampled. The length scale and flux scale of the function should be of order unity. The elements of the <code>range</code> array should be ordered, span the desired domain of the function, and split the domain into intervals such that:</p>
<ul>
<li>There are no sign changes within an interval</li>
<li>There is at most one extremum within the interval</li>
<li>Any extremum can be localized by sampling the interval at <code>RANGE_DIVISION_FOR_EXTREMA</code> equidistant points.</li>
<li>The function is smooth enough to be integrated over the interval with standard basic methods. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af0a5b7ccae1a1489ce68ab946f47dfd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">galsim::OneDimensionalDeviate::OneDimensionalDeviate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgalsim_1_1_flux_density.html">FluxDensity</a> &amp;&#160;</td>
          <td class="paramname"><em>fluxDensity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isRadial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structgalsim_1_1_g_s_params_ptr.html">GSParamsPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>gsparams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>constructor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fluxDensity</td><td>The <a class="el" href="classgalsim_1_1_flux_density.html" title="An interface class for functions giving differential flux vs x or r. ">FluxDensity</a> being sampled. No copy is made, original must stay in existence. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">range</td><td>Ordered argument vector specifying the domain for sampling as described in class docstring. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isRadial</td><td>Set true for an axisymmetric function on the plane; false for linear domain. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gsparams</td><td><a class="el" href="structgalsim_1_1_g_s_params.html">GSParams</a> object storing constants that control the accuracy of operations, if different from the default. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2588844558fa11a3298054daf3005576"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double galsim::OneDimensionalDeviate::getNegativeFlux </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return absolute value of total flux in regions of negative <a class="el" href="classgalsim_1_1_flux_density.html" title="An interface class for functions giving differential flux vs x or r. ">FluxDensity</a>. </p>

</div>
</div>
<a class="anchor" id="a340447da0fe708e013a438a55638ebee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double galsim::OneDimensionalDeviate::getPositiveFlux </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return total flux in positive regions of <a class="el" href="classgalsim_1_1_flux_density.html" title="An interface class for functions giving differential flux vs x or r. ">FluxDensity</a>. </p>

</div>
</div>
<a class="anchor" id="a5f7d73d84a2763b364390cf37b94d281"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classgalsim_1_1_photon_array.html">PhotonArray</a>&gt; galsim::OneDimensionalDeviate::shoot </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgalsim_1_1_uniform_deviate.html">UniformDeviate</a>&#160;</td>
          <td class="paramname"><em>ud</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draw photons from the distribution. </p>
<p>If <code>_isRadial=true</code>, photons will populate the plane. Otherwise only the x coordinate of photons will be generated, for 1d distribution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">N</td><td>number of photons to draw </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ud</td><td><a class="el" href="classgalsim_1_1_uniform_deviate.html" title="Pseudo-random number generator with uniform distribution in interval [0.,1.). ">UniformDeviate</a> used to produce random selections. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/galsim/<a class="el" href="_one_dimensional_deviate_8h_source.html">OneDimensionalDeviate.h</a></li>
</ul>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated for GalSim by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6</small></address>
</body>
</html>
