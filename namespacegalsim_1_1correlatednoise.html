<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GalSim: galsim.correlatednoise Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GalSim
   </div>
   <div id="projectbrief">The modular galaxy image simulation toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="namespacemembers.html"><span>Package&#160;Functions</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegalsim.html">galsim</a></li><li class="navelem"><a class="el" href="namespacegalsim_1_1correlatednoise.html">correlatednoise</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">galsim.correlatednoise Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1correlatednoise_1_1___base_correlated_noise.html">_BaseCorrelatedNoise</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Base Class describing 2D correlated Gaussian random noise fields.  <a href="classgalsim_1_1correlatednoise_1_1___base_correlated_noise.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1correlatednoise_1_1_correlated_noise.html">CorrelatedNoise</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Then we define the <a class="el" href="classgalsim_1_1correlatednoise_1_1_correlated_noise.html" title="Then we define the CorrelatedNoise, which generates a correlation function by estimating it directly ...">CorrelatedNoise</a>, which generates a correlation function by estimating it directly from images:  <a href="classgalsim_1_1correlatednoise_1_1_correlated_noise.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1correlatednoise_1_1_covariance_spectrum.html">CovarianceSpectrum</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class to hold a <code>ChromaticSum</code> noise covariance spectrum (which is a generalization of a power spectrum or equivalently a correlation function).  <a href="classgalsim_1_1correlatednoise_1_1_covariance_spectrum.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1correlatednoise_1_1_uncorrelated_noise.html">UncorrelatedNoise</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class that represents 2D correlated noise fields that are actually (at least initially) uncorrelated.  <a href="classgalsim_1_1correlatednoise_1_1_uncorrelated_noise.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a720d87f1f602083056f0231ac0841058"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1correlatednoise.html#a720d87f1f602083056f0231ac0841058">whitenNoise</a></td></tr>
<tr class="separator:a720d87f1f602083056f0231ac0841058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a161193281f2b195785c885bf1d692bcc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1correlatednoise.html#a161193281f2b195785c885bf1d692bcc">symmetrizeNoise</a></td></tr>
<tr class="separator:a161193281f2b195785c885bf1d692bcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93de6f1703f446b8c44aca7e0e7308bd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegalsim_1_1correlatednoise.html#a93de6f1703f446b8c44aca7e0e7308bd">getCOSMOSNoise</a></td></tr>
<tr class="memdesc:a93de6f1703f446b8c44aca7e0e7308bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a representation of correlated noise in the HST COSMOS F814W unrotated science coadd images.  <a href="#a93de6f1703f446b8c44aca7e0e7308bd">More...</a><br/></td></tr>
<tr class="separator:a93de6f1703f446b8c44aca7e0e7308bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a93de6f1703f446b8c44aca7e0e7308bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.correlatednoise.getCOSMOSNoise </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>file_name</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rng</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cosmos_scale</em> = <code>0.03</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>variance</em> = <code>0.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x_interpolant</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gsparams</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dx_cosmos</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a representation of correlated noise in the HST COSMOS F814W unrotated science coadd images. </p>
<p>See <a href="http://cosmos.astro.caltech.edu/astronomer/hst.html">http://cosmos.astro.caltech.edu/astronomer/hst.html</a> for information about the COSMOS survey, and Leauthaud et al (2007) for detailed information about the unrotated F814W coadds used for weak lensing science.</p>
<p>This function uses a stacked estimate of the correlation function in COSMOS noise fields. The correlation function was computed by the GalSim team as described in </p>
<pre class="fragment">/YOUR/REPO/PATH/GalSim/devel/external/hst/make_cosmos_cfimage.py
</pre><p>and the resulting file is distributed with GalSim as </p>
<pre class="fragment">/YOUR/REPO/PATH/GalSim/share/acs_I_unrot_sci_20_cf.fits
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>If provided, override the usual location of the file with the given file name. [default: None] </td></tr>
    <tr><td class="paramname">rng</td><td>If provided, a random number generator to use as the random number generator of the resulting noise object. (may be any kind of <a class="el" href="classgalsim_1_1_base_deviate.html" title="Base class for all the various Deviates. ">BaseDeviate</a> object) [default: None, in which case, one will be automatically created, using the time as a seed.] </td></tr>
    <tr><td class="paramname">cosmos_scale</td><td>COSMOS ACS F814W coadd image pixel scale in the units you are using to describe GSObjects and image scales in GalSim. [default: 0.03 (arcsec), see below for more information.] </td></tr>
    <tr><td class="paramname">variance</td><td>Scales the correlation function so that its point variance, equivalent to its value at zero separation distance, matches this value. [default: 0., which means to use the variance in the original COSMOS noise fields.] </td></tr>
    <tr><td class="paramname">x_interpolant</td><td>Forces use of a non-default interpolant for interpolation of the internal lookup table in real space. See below for more details. [default: <a class="el" href="classgalsim_1_1_linear.html" title="Linear interpolant. ">galsim.Linear</a>(tol=1.e-4)] </td></tr>
    <tr><td class="paramname">gsparams</td><td>An optional <a class="el" href="structgalsim_1_1_g_s_params.html">GSParams</a> argument. See the docstring for <a class="el" href="structgalsim_1_1_g_s_params.html">GSParams</a> for details. [default: None]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <a class="el" href="classgalsim_1_1correlatednoise_1_1___base_correlated_noise.html" title="A Base Class describing 2D correlated Gaussian random noise fields. ">_BaseCorrelatedNoise</a> instance representing correlated noise in F814W COSMOS images.</dd></dl>
<p>The default <code>x_interpolant</code> is a <code><a class="el" href="classgalsim_1_1_linear.html" title="Linear interpolant. ">galsim.Linear</a>(tol=1.e-4)</code>, which uses bilinear interpolation. The use of this interpolant is an approximation that gives good empirical results without requiring internal convolution of the correlation function profile by a Pixel object when applying correlated noise to images: such an internal convolution has been found to be computationally costly in practice, requiring the Fourier transform of very large arrays.</p>
<p>The use of the bilinear interpolants means that the representation of correlated noise will be noticeably inaccurate in at least the following two regimes:</p>
<p>i) If the pixel scale of the desired final output (e.g. the target image of drawImage(), applyTo() or whitenImage()) is small relative to the separation between pixels in the <code>image</code> used to instantiate <code>cn</code> as shown above. ii) If the <a class="el" href="classgalsim_1_1correlatednoise_1_1_correlated_noise.html" title="Then we define the CorrelatedNoise, which generates a correlation function by estimating it directly ...">CorrelatedNoise</a> instance <code>cn</code> was instantiated with an image of scale comparable to that in the final output, and <code>cn</code> has been rotated or otherwise transformed (e.g. via the rotate(), shear() methods, see below).</p>
<p>Conversely, the approximation will work best in the case where the correlated noise used to instantiate the <code>cn</code> is taken from an input image for which <code>image.scale</code> is smaller than that in the desired output. This is the most common use case in the practical treatment of correlated noise when simulating galaxies from COSMOS, for which this function is expressly designed.</p>
<p>Changing from the default bilinear interpolant is made possible, but not recommended. For more information please see the discussion on <a href="https://github.com/GalSim-developers/GalSim/pull/452">https://github.com/GalSim-developers/GalSim/pull/452</a>.</p>
<p>You may also specify a gsparams argument. See the docstring for <a class="el" href="structgalsim_1_1_g_s_params.html">GSParams</a> using help(<a class="el" href="structgalsim_1_1_g_s_params.html">galsim.GSParams</a>) for more information about this option.</p>
<h2>Important note regarding units </h2>
<p>The ACS coadd images in COSMOS have a pixel scale of 0.03 arcsec, and so the pixel scale <code>cosmos_scale</code> adopted in the representation of of the correlation function takes a default value </p>
<pre class="fragment">cosmos_scale = 0.03
</pre><p>If you wish to use other units, ensure that the input keyword <code>cosmos_scale</code> takes the value corresponding to 0.03 arcsec in your chosen system.</p>
<h2>Example usage </h2>
<p>The following commands use this function to generate a 300 pixel x 300 pixel image of noise with HST COSMOS correlation properties (substitute in your own file and path for the <code>filestring</code>). </p>
<pre class="fragment">&gt;&gt;&gt; rng = galsim.BaseDeviate(123456)
&gt;&gt;&gt; noise = galsim.getCOSMOSNoise(rng=rng)
&gt;&gt;&gt; image = galsim.ImageD(nx, ny, scale=0.03)
&gt;&gt;&gt; image.addNoise(cf)
</pre><p>If your image has some other pixel scale or a complicated WCS, then the applied noise will have the correct correlations in world coordinates, which may not be what you wanted if you expected the pixel-to-pixel correlations to match the COSMOS noise profile. However, in this case, you would want to view your image with the COSMOS pixel scale when you apply the noise: </p>
<pre class="fragment">&gt;&gt;&gt; image = galsim.Image(nx, ny, wcs=complicated_wcs)
&gt;&gt;&gt; noise = galsim.getCOSMOSNoise(rng=rng)
&gt;&gt;&gt; image.view(wcs=noise.wcs).addNoise(noise)
</pre><p>The FITS file <code>out.fits</code> should then contain an image of randomly-generated, COSMOS-like noise. </p>

</div>
</div>
<a class="anchor" id="a161193281f2b195785c885bf1d692bcc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.correlatednoise.symmetrizeNoise </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>noise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>order</em> = <code>4</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Impose N-fold symmetry (where N=`order` is an even integer &gt;=4) on the noise in a square
image assuming that the noise currently in the image can be described by the CorrelatedNoise
object `noise`.  See CorrelatedNoise.symmetrizeImage() docstring for more details of how this
method works.

@param noise        The CorrelatedNoise model to use when figuring out how much noise to add to
                    make the final noise have symmetry at the desired order.
@param order        Desired symmetry order.  Must be an even integer larger than 2.
                    [default: 4]

@returns the theoretically calculated variance of the combined noise fields in the
         updated image.
</pre> 
</div>
</div>
<a class="anchor" id="a720d87f1f602083056f0231ac0841058"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def galsim.correlatednoise.whitenNoise </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>noise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Whiten the noise in the image assuming that the noise currently in the image can be described
by the CorrelatedNoise object `noise`.  See CorrelatedNoise.whitenImage() docstring for more
details of how this method works.

@param noise        The CorrelatedNoise model to use when figuring out how much noise to add to
                    make the final noise white.
@returns the theoretically calculated variance of the combined noise fields in the
         updated image.
</pre> 
</div>
</div>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated for GalSim by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6</small></address>
</body>
</html>
