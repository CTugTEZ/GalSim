<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GalSim: Changes from v1.3 to v1.4</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GalSim
   </div>
   <div id="projectbrief">The modular galaxy image simulation toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Changes from v1.3 to v1.4 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>API Changes </h2>
<ul>
<li>Changed the galsim.Bandpass and galsim.SED classes so that formerly optional keywords to indicate units (<code>wave_type</code> for the former, <code>wave_type</code> and <code>flux_type</code> for the latter) are now required. (#745)</li>
<li>Changed the default shift and/or offset for the output.psf field in a config file to not do any shift or offset. It had been the default to match what was applied to the galaxy (cf. demo5). However, we thought that was probably not the most intuitive default. Now, matching the galaxy is still possible, but requires explicit specification of output.psf.shift = "galaxy" or output.psf.offset = "galaxy". (#691)</li>
</ul>
<h2>Dependency Changes </h2>
<ul>
<li>Added future module as a dependency. This is a trivial one to install, so it should not be any hardship. You can use either <code>pip install future</code> or <code>easy_install future</code>. (#534)</li>
<li>Changed PyYAML to a nominal dependency, even though it is still not technically required if you do not plan to use the <code>galsim</code> executable (or only plan to use JSON config files). (#768)</li>
</ul>
<h2>Bug Fixes </h2>
<ul>
<li>Fixed bug in config that did not allow users to pass in a filename for COSMOS (correlated) noise. (#732)</li>
<li>Improved ability of <a class="el" href="namespacegalsim_1_1fits.html#abbad6f82a80bc74fb22a752af1bbd8e9" title="Now the primary read functions. ">galsim.fits.read</a> to handle invalid but fixable FITS headers. (#602)</li>
<li>Fixed bug in des module related to building meds file with wcs taken from the input images. (#654)</li>
<li>Improved ability of ChromaticObjects to find fiducial achromatic profiles and wavelengths with non-zero flux. (#680)</li>
<li>Fixed a bug in some of the WCS classes if the RA/Dec axes in the FITS header are reversed (which is allowed by the FITS standard). (#681)</li>
<li>Fixed a bug in the way Images are instantiated for certain combinations of ChromaticObjects and image-setup keyword arguments (#683)</li>
<li>Added ability to manipulate the width of the moment-measuring weight function for the KSB shear estimation method of the <a class="el" href="namespacegalsim_1_1hsm.html">galsim.hsm</a> package. (#686)</li>
<li>Fixed bug in the (undocumented) function COSMOSCatalog._makeSingleGalaxy, where the resulting object did not set the index attribute properly. (#694)</li>
<li>Fixed an error in the <code>CCDNoise.getVariance()</code> function, as well as some errors in the documentation about the units of CCDNoise parameters. (#713)</li>
<li>Fixed a bug in drawKImage when non-default scale is given, but no images are provided. (#720)</li>
<li>Fixed an assert failure in InterpolatedImage if the input image is identically equal to zero. (#720)</li>
<li>Fixed a potential instability in drawing with deconvolution. Now the fft of the deconvolved image will not be made larger than 1/kvalue_accuracy. (#720)</li>
<li>Fixed a bug in how InterpolatedKImage checked for properly Hermitian input images. (#723)</li>
<li>Updated ups table file so that setup command is <code>setup galsim</code> instead of <code>setup GalSim</code> (#724)</li>
<li>Added new default algorithm for thinning SEDs and Bandpasses to enable faster calculations while still meeting relative error constraints. (#739).</li>
<li>Fixed a bug in how DistDeviate handled probabilities that were nearly, but not quite, flat (#741)</li>
<li>Fixed a bug in chromatic parametric galaxy models based on COSMOS galaxies. (#745)</li>
<li>Fixed a bug in the Image copy constructor where the wcs was not copied if the <code>image</code> parameter is a galsim.Image. (#762)</li>
<li>Fixed a bug in the Sum and Convolution constructors when they are only adding or convolving a single element that could lead to erroneous str and reprs for the resulting object if it was then transformed. (#763)</li>
<li>Fixed a bug related to boost-v1.60 python shared_ptr registration. (#764)</li>
<li>Made the error message when trying to read a non-existent *.fits.gz or *.fits.bz2 file more helpful. (#773)</li>
</ul>
<h2>Deprecated Features </h2>
<ul>
<li>Deprecated the gal.type=Ring option in the config files. The preferred way to get a ring test is now with the new stamp.type=Ring. See demo5 and demo10 for examples of the new syntax. (#698)</li>
</ul>
<h2>New Features </h2>
<ul>
<li>Added OutputCatalog class, which can be used to keep track of and then output truth information. cf. demos 9 and 10. (#301, #691)</li>
<li>Added methods calculateHLR, calculateMomentRadius, and calculateFWHM to both GSObject and Image. (#308)</li>
<li>Added LookupTable2D to facilitate quick interpolation of two-dimensional tabular data. (#465)</li>
<li>Added support for Python 3. Specifically, we tested with Python 3.4 and 3.5, but we expect that it should work for Python versions &gt;= 3.3. (#534)</li>
<li>Added AtmosphericScreen, OpticalScreen, and PhaseScreenList used to generate PSFs via Fourier optics. (#549)</li>
<li>Added PhaseScreenPSF to transform PhaseScreens into GSObjects. (#549)</li>
<li>Added Atmosphere function to conveniently assemble a multi-layer atmosphere PhaseScreenList. (#549)</li>
<li>Rewrote OpticalPSF to operate under the PhaseScreen framework to enable fully self-consistent optics+atmospheric PSFs. (#549)</li>
<li>OpticalPSF now able to handle Zernike polynomial aberrations up to arbitrary order. (#549)</li>
<li>Added a simple, linear model for persistence in the detectors that accepts a list of galsim.Image instances and a list of an equal number of floats. (#554)</li>
<li>Added BoundsI.numpyShape() to easily get the numpy shape that corresponds to a given bounds instance. (#654)</li>
<li>Have FITS files with unsigned integer data automatically convert that into the corresponding signed integer data type for use in GalSim, rather than converting to float64, which it had been doing. (#654)</li>
<li>Made COSMOSCatalog write an index parameter for both parameteric and real galaxy types to indicate the index of the object in the full COSMOS catalog. (#654, #694)</li>
<li>Added ability to specify lambda and r0 separately for Kolmogorov to have GalSim do the conversion from radians to the given scale unit. (#657)</li>
<li>Made it possible to initialize an InterpolatedImage from a user-specified HDU in a FITS file with multiple extensions. (#660)</li>
<li>Changed <code><a class="el" href="namespacegalsim_1_1fits.html#a17dbb70385408586795efade476cdc98" title="Write a Python list of images to a multi-extension FITS file. ">galsim.fits.writeMulti</a></code> to allow any of the "image"s to be already-built hdus, which are included as is. (#691)</li>
<li>Added optional <code>wcs</code> argument to <code>Image.resize()</code>. (#691)</li>
<li>Added <code>BaseDeviate.discard(n)</code> and <code>BaseDeviate.raw()</code>. (#691)</li>
<li>Added <code>sersic_prec</code> option to COSMOSCatalog.makeGalaxy(). (#691)</li>
<li>Made it possible to impose some cuts on galaxy image quality in the COSMOSCatalog class. (#693)</li>
<li>Added <code>convergence_threshold</code> as a parameter of HSMParams. (#709)</li>
<li>Improved the readability of Image and BaseDeviate reprs. (#723)</li>
<li>Sped up some Bandpass and SED functionality (and LookupTable class in general). (#735)</li>
<li>Added the FourierSqrt operator to compute the Fourier-space square root of a profile. This is useful in implementing optimal coaddition algorithms; see make_coadd.py in the examples directory (#748).</li>
<li>Made Bandpass.thin() and Bandpass.truncate() preserve the zeropoint by default. (#711)</li>
<li>Added version information to the compiled C++ library. (#750)</li>
</ul>
<h2>Updates to galsim executable </h2>
<ul>
<li>Dropped default verbosity from 2 to 1, since for real simulations, 2 is usually too much output. (#691)</li>
<li>Added ability to easily split the total work into several jobs with galsim -n njobs -j jobnum. (#691)</li>
<li>Added galsim -p to perform profiling on the run. (#691)</li>
</ul>
<h2>New config features </h2>
<ul>
<li>Added ability to write truth catalogs using output.truth field. (#301, #691)</li>
<li>Improved the extensibility of the config parsing. It is now easier to write custom image types, object types, value types, etc. and register them with the config parser. The code with the new type definitions should be given as a module for the code to import using the new 'modules' top-level config field. (#691, #774)</li>
<li>Added the 'template' option to read another config file and use either the whole file as a template or just a given field from the file. (#691)</li>
<li>Made '$' and '@' shorthand for 'Eval' and 'Current' types respectively in string values. e.g. '$(pixel_scale) * 2' would be parsed to mean 2 times the current value of image.pixel_scale. (#691)</li>
<li>Allowed gsobjects to be referenced from Current types. (#691)</li>
<li>Added x,f specification for a RandomDistribution. (#691)</li>
<li>Added a new 'stamp' top level field and moved some of the items that had belonged in 'image' over to 'stamp'. Notably, 'draw_method', 'offset', and 'gsparams', among other less commonly used parameters. However, for backwards compatibility, they are all still allowed in the image field as well. (#691)</li>
<li>Added more example scripts to showcase how to use some of the new config features to make fairly sophisticated simulations. cf. examples/great3 and examples/des. (#654, #691)</li>
<li>Added new stamp type=Ring to effect ring tests. This replaces the old gsobject type=Ring, which is now deprecated. See demo5 and demo10 for examples of the new preferred syntax. (#698)</li>
</ul>
<h2>File name changes </h2>
<ul>
<li>Changed the names of the real galaxy catalog examples from <em>catalog_example</em> to <em>catalog_23.5_example</em> (#740) </li>
</ul>
</div></div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated for GalSim by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6</small></address>
</body>
</html>
